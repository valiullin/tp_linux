# Вывод информации о состоянии системы
##Дано
 - Виртуальная машина под управлением ОС Linux (ubuntu 16.04)
 - 1-2 core
 - 1-2 GB RAM
 - 8-10G HDD

##Задание
* создать страницу отображения ключевой информации о системе:
* Средняя загрузка (LoadAverage)
* Загрузка дисков (iostat)
* Загрузка сети
* Top talkers по сети (сортировка по убыванию)
 * по протоколам (proto, bytes, %от последней минуты)
 * по пакетам (src/dst ip, proto, src/port, pps)
 * по адресам (src/dst ip, proto, src/port, bps)
* Статистика по сетевым соединениям
 * слушающие сокеты (tcp,udp)
 * количество tcp соединений находящихся в разных состояниях (ESTAB,FIN_WAIT,SYN_RCV и т.д.)
* Средняя загрузка CPU (%us(%us+%ni),%sys,%id,%iowait)
* Информация о дисках (%Free space, %free inodes) по каждой файловой системе кроме служебных (/sys, /proc, /dev)
Информация с усреднением за 1 минуту. Отображение информации за предыдущую минуту. Сохранение и доступ к архивной информации будет дополнительным плюсом.

На странице необходимо отображать в табличном виде информацию перечисленную выше.
Метрики которые требуют отдельного внимания (повышенная нагрузка на процессор, дисковое пространство ниже какого-то порога (%80 - WARN, %90 - CRIT) необходимо "подсвечивать" - WARN желтым цветом, CRIT - красным. LoadAvg и cputimes - важные метрики.

Для создания этой страницы можно использовать любой стандартный инструмент:
 - php
 - shell
 - awk
 - python

Страница должны быть доступна по адресу: **http://yo.ur.ip.addr/sysinfo** (например **http://127.0.0.1/sysinfo**)

Доступ к странице должен обеспечиваться связкой **nginx+apache**.
Для связки apache и вашего инструмента вы можете использовать любой доступный в стандартной поставке способ: apache_DSO, CGI, INETD/XINETD.

Дополнительно вверху страницы надо выводить:
 * адрес клиента который обращается к ресурсу, его порт
 * адрес nginx который обращается к apache, его порт, версию nginx (в nginx добавить в проксируемый запрос заголовок X-NGX-VERSION).

Требования к оформлению:

 - Ваша страница должна быть информативной и читаться в консольном браузере типа elinks или lynx, все вычисления должны быть строго на стороне сервера, максимум что позволяется клиенту - meta http-equiv refresh.
 - Можно использовать только ПО из стандартных репозиториев, без дополнительных
 - Ваш проект должен быть оформлен как набор скриптов/крон-задач/sudo-правил которые принадлежат отдельному пользователю
   * http-scripts(cgi-bin)
   * crontab
   * sudo.rules
   * install.sh - для установки необходимых зависимостей (packages only!!), добавления sudo-правил и конфигурации apache/nginx
 - Всем будет удобнее, если ваш проект будет оформлен на гитхабе, как набор для скачивания и установки на "голую" ubuntu.

Чего **НЕ НАДО** делать:
 - делать это все на всяких фронтендерских технологиях, типа ajax/angularJS и прочае
 - Заниматься излишними украшательствами.
 - Использовать и адаптировать существующие средства мониторинга типа checkmk/nagios и т.д.

####Load Average
Возможные источники:
 - top
 - vmstat
 - uptime
 - procfs

####Загрузка дисков
Возможные источники:
 - iostat
 - /sys/block/*

####Загрузка сети
Возможные источники:
 - procfs (/proc/net/dev)
 - ethtool

####Top talkers
 - Возможные источники: tcpdump (man tcpdump ищи -G) + cron
 - ulog (не рекомендую, т.к трудозатратно)

####Информация о сетевых соединениях
Возможные источники:
 - netstat
 - ss
 - procfs (proc/net/tcp, proc/net/udp)

####Загрузка CPU
Возможные источники:
 - top
 - vmstat
 - mpstat

####Информация о дисках
Возможные источники:
 - df
 - /sys
